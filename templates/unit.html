<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<title>{{ unit.short_title | title }}</title>
	<meta property="og:title" content="{{ unit.short_title | title }}"/>
	<meta property="og:description"
		  content="{{unit.rarity.stars}}, {{unit.element.name | title}}, {{unit.gear_kind.name | title}}, {{unit.cost}} cost unit. Follow the link for more details."/>
	<meta property="og:url" content="https://potk-fan-database.neocities.org/units/{{unit.ID}}.html"/>
	<meta property="og:image" content="https://potk-fan-database.neocities.org/images/units/{{unit.resource_id}}/unit_hires.png">
</head>
<body>
{% import 'macros.html' as macros with context %}
<div class="container">
	<div class="breadcrumb">
		<h5>
			<a class="breadcrumb-link" href="..">Main</a>
			<span class="breadcrumb-gt">&gt;</span>
			<span class="breadcrumb-child">{{ unit.eng_name | title }}</span>
		</h5>
	</div>
	<h1>
		{{ unit.eng_name | title }} <small>{{ stars[unit.rarity] }}</small><br/>
		<small class="text-muted">{{ unit.jp_name }}</small>
	</h1>
	<div id="unit-info">
		<img class="img-fluid"
			 src="../images/units/{{unit.resource_id}}/unit_hires.png"/>
		<h2>Unit Information</h2>
		<dl class="row">
			<dt class="col-sm-3">Element</dt>
			<dd class="col-sm-9">{{ unit.element.name | title }}</dd>
			<dt class="col-sm-3">Weapon Type</dt>
			<dd class="col-sm-9">{{ unit.gear_kind.name | title }}</dd>
			<dt class="col-sm-3">Rarity</dt>
			<dd class="col-sm-9">{{ stars[unit.rarity] }}</dd>
			<dt class="col-sm-3">Cost</dt>
			<dd class="col-sm-9">{{ unit.cost }}</dd>
			<dt class="col-sm-3">Level</dt>
			<dd class="col-sm-9">{{ unit.level.ini }} - {{ unit.level.max }}</dd>
			<dt class="col-sm-3">Job</dt>
			<dd class="col-sm-9">{{ unit.job.name }}</dd>
			<dt class="col-sm-3">Movement</dt>
			<dd class="col-sm-9">{{ unit.job.movement }}</dd>
			{% if unit.tags %}
			<dt class="col-sm-3">Tags</dt>
			<dd class="col-sm-9">
				{% for tag in unit.tags %}
				<span class="badge badge-pill {{badge_tag[tag.kind]}}">{{tag.long_label}}</span>
				{% endfor %}
			</dd>
			{% endif %}
		</dl>
	</div>
	<div id="stats-caps">
		<h2>Stats Caps</h2>
		{% if unit.is_awakened %}
		<div class="alert alert-warning" role="alert">
			<p><strong>The stats for this unit are incorrect.</strong></p>
			<p>
				The growth column value is lower than the actual in-game value.
				We've been unable to find an authoritative source for the
				correct values.
			</p>
		</div>
		{% endif %}
		{% if not unit.has_cc() %}
		{{- macros.unit_stats_tab_pane('main', unit.stats, False) -}}
		{% else %}
		<div id="cc-info">
			<ul class="nav nav-pills mb-3" role="tablist">
				{% for cc_type in ClassChangeType %}
				{% if unit.has_cc(cc_type) %}
				<li class="nav-item">
					<a class="nav-link{% if loop.first %} active{% endif %}"
					   role="tab"
					   data-toggle="pill"
					   href="#cc-tab-{{cc_type.name}}">
						{{ cc_desc[cc_type] }}
					</a>
				</li>
				{% endif %}
				{% endfor %}
			</ul>
			<div class="tab-content">
				{% for cc_type in ClassChangeType %}
				{% if unit.has_cc(cc_type) %}
				<div id="cc-tab-{{cc_type.name}}"
					 class="tab-pane fade{% if loop.first %} active show{% endif %}"
					 role="tabpanel">
					{% set stats = unit.get_cc(cc_type).stats %}
					{{- macros.unit_stats_tab_pane(cc_type.name, stats, True) -}}
				</div>
				{% endif %}
				{% endfor %}
			</div>
		</div>
		{% endif %}
	</div>
	{% if unit.has_ud %}
	<div id="ud-info">
		<h2>
			Unleashed Domain (UD)
			<button class="btn btn-secondary" data-toggle="collapse" data-target="#ud-content">
				Hide/Show
			</button>
		</h2>
		<div id="ud-content" class="collapse">
			<table class="table table-sm table-bordered table-hover table-condensed">
				<thead>
				<tr>
					<td rowspan="2"></td>
					<th scope="col" colspan="8" class="text-center">
						Necessary DV to Reach the UD Bonus Cap
					</th>
				</tr>
				<tr>
					{% for stat in StatType %}
					<th scope="col" class="text-right">{{ stat.name }}<br/>{{ jp_stats[stat] }}</th>
					{% endfor %}
				</tr>
				</thead>
				<tbody>
				<tr>
					<th scope="row" class="text-right">DV</th>
					{% for stat in StatType %}
					<td class="text-right">
						{{- unit.stats.bal.of(stat).ud.dv_for_cap | default('-', true) -}}
					</td>
					{% endfor %}
				</tr>
				</tbody>
			</table>
			<table class="table table-sm table-bordered table-hover table-condensed">
				<thead>
				<tr>
					<td></td>
					<th scope="col" colspan="8" class="text-center">Total Bonus</th>
				</tr>
				<tr>
					<th scope="col" class="text-right">DV</th>
					{% for stat in StatType %}
					<th scope="col" class="text-right">{{ stat.name }}<br/>{{ jp_stats[stat] }}</th>
					{% endfor %}
				</tr>
				</thead>
				<tbody>
				{# UD isn't affected by unit type, so we just use bal #}
				{% set stats = unit.stats.bal %}
				{% for milestone in stats.ud_milestones %}
				<tr>
					<td class="text-right">{{ milestone }}</td>
					{% for stat in StatType %}
					<td class="text-right">
						{% set ud = stats.of(stat).ud %}
						{% set bonus = ud.bonus(milestone) %}
						{% set inc = ud.inc_by_milestone[milestone] %}
						{% if inc %}<small class="text-muted">(+{{- inc }})</small>&nbsp;{% endif %}
						{{- bonus | default('-', true) -}}
					</td>
					{% endfor %}
				</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
	{% endif %}
</div>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>
</html>
